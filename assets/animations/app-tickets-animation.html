<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>confetti-test</title>

    <style>
        svg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);

            width: 400px;
            overflow: visible;
        }
    </style>
</head>
<body>


    <script>
        function getRndInteger(min, max) {
          return Math.floor(Math.random() * (max - min + 1) ) + min;
        }

        function randomFloatBetween(minValue,maxValue,precision){
            if(typeof(precision) == 'undefined'){
                precision = 2;
            }
            return parseFloat(Math.min(minValue + (Math.random() * (maxValue - minValue)),maxValue).toFixed(precision));
        }

        document.querySelectorAll('svg path, svg g').forEach(function(el) {
            el.removeAttribute('data-name');
        });

        document.querySelectorAll('svg [id*="_Group"], svg [id*="_Path"]').forEach(function(el) {
            el.removeAttribute('id');
        });

        TweenLite.randomEase = Sine.easeInOut;

        var confetti = new TimelineMax({
            repeat: -1,
            repeatDelay: 1.5
        });

        confetti
        .to('#tickets-animation #tickets', .5, {opacity: 1})

        document.querySelectorAll('#tickets-animation #tickets path').forEach(function(el, index) {
            ntl = new TimelineMax({});

            var hor = getRndInteger(-400, 400),
                vert = getRndInteger(200, 800),
                timeEl = randomFloatBetween(2, 3),
                elDur = randomFloatBetween(0.8, 1.5);

            let offsetTimeEl = '-=' + timeEl/3;

            ntl
            .to(el, timeEl, {x: hor}, 0)
            .fromTo(el, timeEl/2, {y: 100}, {y: -vert, ease: 'sine.out'}, 0)
            .to(el, timeEl/2, {y: 100, ease: 'power1.in'}, timeEl/2)

            .to(el, .5, {opacity: 0}, offsetTimeEl)

            .to(el, elDur, {transformOrigin: '50% 50%', rotation: Math.random() > .5 ? -360:360, repeat: 1.5, ease: Power0.easeNone}, 0);

            confetti.add(ntl, 0);
        });


    </script>
</body>
</html>
